{% extends 'base.html.twig' %}

{% block title %}Admin index{% endblock %}

{% block body %}
    <div class='d-flex justify-content-center gap-4 align-items-center'>
        <h1>User list</h1>
        <a href="{{ path('app_admin_new') }}" class="btn btn-primary fs-4 pt-0">+</a>
    </div

    <form action='{{ path('app_admin_index')}}' method='POST'>
		<h4 class="m0">Search a specific roles (or user)</h4>
		{# Title #}
		<div class="form-group w-25">
			<label for="roles" class="">Roles</label>
			<div class="">
				<select class="form-control" id="role_search" name="role_search">
					<option {{ (role_search == '' ? 'selected') }}></option>
					{% for role in roles %}
					<option {{ (role_search == role ? 'selected') }} value='{{role}}'>{{ role }}</option>
					{% endfor %}
				</select>
			</div>
		</div>
		<div>
			<input type="submit" name="submit" value="Search"/>
		</div>
	</form>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Username</th>
                <th>Roles</th>
                <th>Password</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for admin in admins %}
            <tr>
                <td>{{ admin.id }}</td>
                <td>{{ admin.username }}</td>
                <td>{{ admin.roles ? admin.roles|json_encode : '' }}</td>
                <td>{{ admin.password }}</td>
                <td>
                    <a href="{{ path('app_admin_show', {'id': admin.id}) }}" class="btn btn-primary">Show</a>
                    <a href="{{ path('app_admin_edit', {'id': admin.id}) }}" class="btn btn-primary">Edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}
