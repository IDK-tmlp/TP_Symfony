<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>{% block title %}Welcome!{% endblock %}</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
		{% block stylesheets %}
			<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		{% endblock %}

		{% block javascripts %}
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		{% endblock %}
	</head>
	<body>
		{% block header %}
			<nav class="navbar navbar-expand-lg navbar-light bg-light d-flex justify-content-between">
				<a href="{{ path('app_homepage') }}" class="navbar-brand p-2">Home</a>
				<div>
					<ul class="navbar-nav">
						<li class="nav-item">
							<a href="{{ path('app_category_index') }}" class="nav-link">Category</a>
						</li>
						<li class="nav-item">
							<a href="{{ path('app_article_index') }}" class="nav-link">Article</a>
						</li>
						{% if is_granted('ROLE_MODO') %}
							<li class="nav-item">
								<a href="{{ path('app_comment_index') }}" class="nav-link">Comment</a>
							</li>
						{% endif %}
						{% if is_granted('ROLE_ADMIN') %}
							<li class="nav-item">
								<a href="{{ path('app_admin_index') }}" class="nav-link">Users</a>
							</li>
						{% endif %}
					</ul>
				</div>
				{% if app.user %}
					<a href="{{ path('app_login') }}" class="nav-link">Account</a>
				{% else %}
					<a href="{{ path('app_login') }}" class="nav-link">Login</a>
				{% endif %}
			</nav>
		{% endblock %}

		{% block body %}
			<div class='d-flex justify-content-center m-2'>
				<h1>Mon BlogSite</h1>
			</div>

			<hr/>

			<div class='d-flex justify-content-center flex-column gap-2'>
				<h2 class='text-center m-2'>Articles recents</h2>
				<section class='d-flex justify-content-center flex-row flew-wrap gap-3'>
					{% for article in recents %}
						{% if not article.isPremium %}
							<section class="card text-center" style="width: 20%">
								<img src='http://127.0.0.1:8000/uploads/images/{{ article.image }}' class="card-img-top" alt="articleCover" width="80px" height="200px">
								<div class="card-body">
									<h5 class="card-title">{{ article.title }}</h5>
									<p class="card-text">{{ article.text }}</p>
									{# <span>Date a format</span> #}
									<a href="{{ path('app_article_show', {'id': article.id}) }}" class="btn btn-primary">See more</a>
									{% if is_granted('ROLE_AUTHOR') %}
										<a href="{{ path('app_article_edit', {'id': article.id}) }}" class="btn btn-primary">Edit</a>
									{% endif %}
								</div>
							</section>
						{% endif %}
					{% endfor %}
				</section>
			</div>

			<hr/>

			<div class='d-flex justify-content-center m-4 gap-3'>
				<h2>Demander a changer de role</h2>
				<a href="{{ path('app_admin_index') }}" class="btn btn-primary">TODO</a>
			</div>

			<hr/>

			<div class='d-flex align-items-center flex-column'>
				<h2>Rechercher un article</h2>
				<form action='{{ path('app_article_index')}}' method='POST' >
					<div class="form-group m-2">
						<input type='text' name='title' placeholder='...'/>
					</div>
					<div class='m-2'>
						<input type="submit" name="submit" value="Search"/>
					</div>
				</form>
			</div>

			<hr/>
			
		{% endblock %}

	</body>
</html>
